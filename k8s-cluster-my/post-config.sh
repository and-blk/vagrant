#!/bin/bash

PROJECT_PATH=$1
echo "Export required variables"
export ANSIBLE_HOST_KEY_CHECKING=False
export  var_postgres_admin_password=postgres
export  var_postgres_admin_private_ssh_key=LS0tLS1CRUdJTiBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0KYjNCbGJuTnphQzFyWlhrdGRqRUFBQUFBQkc1dmJtVUFBQUFFYm05dVpRQUFBQUFBQUFBQkFBQUJsd0FBQUFkemMyZ3RjbgpOaEFBQUFBd0VBQVFBQUFZRUF4MTkrdnNudXd2OE92eVFXWTBxeGtCRG93RU8wZzdGU3VobzRDTXR2ZHVndm5kektNVDZrCnRHcERmNEJFOER2V3BaYmgxWER6cXJCbXkzNUhDSDhIeVpMdzZ4THdhY0xNb0VFS0VZMTkrK1hadzVOTFkvWGN6UW91NDEKMVI2WXdpVTZJajcyNU00b1VIMUlwYlNmSnc5Zlo4WEVqSXJpdy9Hc2pxVXRESGxFN09FMTBZTmhCNjBEak5MNVhEREhTUgp4NEI5U3ZDRHZpM1UvY3E3dEZ0WHdIVDhsQ3EzUWYvVTFIVUtKTjd5TGtWc3d2b3NmWGZiYXBJOHpFYVVnUThVN05mVkw3CmRLRnpCUzMybzlKUHRUUUhvdjBIOWdBZ0hRcWhEU0gvR3haOTI0UHluL3M2c1pYa29aNjBJbDdZbEI0Y1RCbDAvdjcyUU0KSk0rNHlSZGI4aWRpQmo0TW1tai9LNldaSWg3dzdTTm00M3dicHg1YjV1NVNZMzE1UlRBREh0THBPYktGbTJtSC95L1VXVApxV1hBNjRkcnBHa2U5UitEdVAzOERwZ3pJbDEySHdNdVZvYnBzTVM4WGxUbUpiN0xZSXhKQ0JxMDczMm5XckJtQnpGYTVlCjRza0NZdmN4RTU4NkVVMlZXN0hMUFlwQUFKWUJuSERIaFpMbUQ2V0ZBQUFGbUJSQVVZZ1VRRkdJQUFBQUIzTnphQzF5YzIKRUFBQUdCQU1kZmZyN0o3c0wvRHI4a0ZtTktzWkFRNk1CRHRJT3hVcm9hT0FqTGIzYm9MNTNjeWpFK3BMUnFRMytBUlBBNwoxcVdXNGRWdzg2cXdac3QrUndoL0I4bVM4T3NTOEduQ3pLQkJDaEdOZmZ2bDJjT1RTMlAxM00wS0x1TmRVZW1NSWxPaUkrCjl1VE9LRkI5U0tXMG55Y1BYMmZGeEl5SzRzUHhySTZsTFF4NVJPemhOZEdEWVFldEE0elMrVnd3eDBrY2VBZlVyd2c3NHQKMVAzS3U3UmJWOEIwL0pRcXQwSC8xTlIxQ2lUZThpNUZiTUw2TEgxMzIycVNQTXhHbElFUEZPelgxUyszU2hjd1V0OXFQUwpUN1UwQjZMOUIvWUFJQjBLb1EwaC94c1dmZHVEOHAvN09yR1Y1S0dldENKZTJKUWVIRXdaZFA3KzlrRENUUHVNa1hXL0luCllnWStESnBvL3l1bG1TSWU4TzBqWnVOOEc2Y2VXK2J1VW1OOWVVVXdBeDdTNlRteWhadHBoLzh2MUZrNmxsd091SGE2UnAKSHZVZmc3ajkvQTZZTXlKZGRoOERMbGFHNmJERXZGNVU1aVcreTJDTVNRZ2F0Tzk5cDFxd1pnY3hXdVh1TEpBbUwzTVJPZgpPaEZObFZ1eHl6MktRQUNXQVp4d3g0V1M1ZytsaFFBQUFBTUJBQUVBQUFHQVJZdmxQWTVaTUVJaWxjQno0c3p5Wll2UWRRCmpwRmlzcjdXa3A5TDlxTVhOSzhPbE15cUxNZDNhOTl1TDZxVVptV0xycUtqZE5lRlF5ZDNla05hMkNQT2w2Q3JZL2tOVDMKNWtycHhUZXpJOFNKRXZUMWpuZjhQclgzcHk0dFhhZVpiYzBZZGZQbTgvbHR3dEZFaU9YK1MzNWc0Und1akxzNGhCSmowdQpHclRPdTBiUUxEYUZDVlZyOEpyRGkwb2txamM1RTVvNE9Fb1RtQm04bzFjZk9QQjc2SFFQUXBtdWN3Q2JDT0NsQ084RjhkClVtSk1WTFFUb1BoRUp3blQwYlU5ZkxlY3NUUVQ5R0hQcGZaREdkOHk4bUViYXM3Uld6K2VGcGJEUHRjT0gxNTB0SUtPOHcKRjZ4UytmTng3QWgxdjF5ZTFsY2J1cGVNbUZCK3VvK1pNYVRKT2VZWklUTDNQd0lyRGNMMjhXQ1NISlRYMUtaUGlGT0NWdwpPWXQ2bERxRWlWeDNvZURvYjdkNzY2dENDZlpyNjJzKzBHRVptRkRwOVFQR1BNL2hxQVdMVTRpNjFvd3EyQ2F2dVQxcFU4CjQ5WnJqS0VDdHVaUUQxWkJwU2pIalU4Z2U2ZS9BcjVVYUdyaTRjeTdZSndHckx0eXVnNHRzdzhiajJ3NlBZTTd5aEFBQUEKd0YwRnVuWGxEREVwdGNpYmJwaWhKcm5OUk5RbUdqb1NVbnFaTko5bktCTk5yOTU2M1NpdVpYeHhpWGdLakpTT3dRM2ZnSwo0TkRvbkZ0ekNoRDFCd1FoZy9HQzJ1cUtiVy9qNTltSktlZUVlMnA5cHpzQ3BtRElDZ1JhOWxjSVd6Vnhldm5BQ3dYUlB6Cm13R1ZQUlhVUU44UXh1SmlvWTVqMHRGbkJwOHFhcGpQOURsRFR3MFVkRWc5dUJGTHN6NW5Xbnh5bFArbjQwSzN5RTZ3WHUKU1oxYytMRDBVWml2WFprdFp2YWdFSG45Vm5uTVpVL0NVTU1Jb2IyNytNaWtMMU5BQUFBTUVBNkV5aEdmVm0rU2xKMU1yTgpHRzdsUHpFdklYT0xwbW44c2Z6a2swdkR0dy84bWhjYWVlam8reG15SE5DdS9aNlV2VkQwS2loNlhIM0ZUQUh0ME5wUkhjCm9PUm9DRU1UMVIrMnBlb0lUb2hmTXFrdEJHSmZ1SHdRQStKUXQyQVdwYytPMCs2eDdMR0FQUHFUQVhmUEVHaEs2WEc2eFcKN09pa0V5S1VVcHBKV1lnWWpFZHJUb05Nem9EOXZNbTJyeFdSTHNBL1JGN2x5ZUdUNlE0WENhTFM3Q2IxM1RxTXVZdE5jNgppbFlYK2FLNDhodGVDV21lb05ucHNFTkVLV1V6b1pBQUFBd1FEYnR0OGF4dFhBdDF4RXRWb0lNMGlZeTRUWVJtZXQ3QUFjCkZOa1lTK0tJVnFFSjJwWVBVdmpOeEsrMlhoNUNFbDg2S2RXelNXWUE0RkpHZFpCcGdhZVAyQ0JIeFJnazA4RHBsU0RiK28KV00rK25GVUxkZURhYWtqUVZad3NpSXJ5UzR2T2Q2ZE5jMUFCRlRXcTVNN0lwZUFpL09NY0pYOTFpVHlvYWRPQVd5ZFVoVQpOUCtiN25Bd29UM3FpaEVvV09mdm1XVFhaaTErOVZlYytWdmw4c1JtbmtnL29qekNXdHQ1MWdGNmRXdmVtSWcwYVlIU1RwCnVkOVRPcFdMQitERTBBQUFBaVkyeHZkV1F0ZFhObGNrQnBaSE5qWVc0dFkyOXVkSEp2YkMxd2JHRnVaUzB3TVFFPQotLS0tLUVORCBPUEVOU1NIIFBSSVZBVEUgS0VZLS0tLS0K
export  var_postgres_admin_public_ssh_key=c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCZ1FESFgzNit5ZTdDL3c2L0pCWmpTckdRRU9qQVE3U0RzVks2R2pnSXkyOTI2QytkM01veFBxUzBha04vZ0VUd085YWxsdUhWY1BPcXNHYkxma2NJZndmSmt2RHJFdkJwd3N5Z1FRb1JqWDM3NWRuRGswdGo5ZHpOQ2k3alhWSHBqQ0pUb2lQdmJremloUWZVaWx0SjhuRDE5bnhjU01pdUxEOGF5T3BTME1lVVRzNFRYUmcyRUhyUU9NMHZsY01NZEpISGdIMUs4SU8rTGRUOXlydTBXMWZBZFB5VUtyZEIvOVRVZFFvazN2SXVSV3pDK2l4OWQ5dHFranpNUnBTQkR4VHMxOVV2dDBvWE1GTGZhajBrKzFOQWVpL1FmMkFDQWRDcUVOSWY4YkZuM2JnL0tmK3pxeGxlU2huclFpWHRpVUhoeE1HWFQrL3ZaQXdrejdqSkYxdnlKMklHUGd5YWFQOHJwWmtpSHZEdEkyYmpmQnVuSGx2bTdsSmpmWGxGTUFNZTB1azVzb1diYVlmL0w5UlpPcFpjRHJoMnVrYVI3MUg0TzQvZndPbURNaVhYWWZBeTVXaHVtd3hMeGVWT1lsdnN0Z2pFa0lHclR2ZmFkYXNHWUhNVnJsN2l5UUppOXpFVG56b1JUWlZic2NzOWlrQUFsZ0djY01lRmt1WVBwWVU9IGNsb3VkLXVzZXJAaWRzY2FuLWNvbnRyb2wtcGxhbmUtMDEK
export  var_postgres_admin_replication_password=repuser
export  var_postgres_admin_replication_username=repuser
export  var_postgres_admin_username=postgres
export  REMOTE_USER=automation


echo "Run ansible playbook"
ansible-playbook --private-key ./temp/sshkey -i ${PROJECT_PATH}/ansible/hosts.yml -u ${REMOTE_USER} ${PROJECT_PATH}/ansible/deploy.yml